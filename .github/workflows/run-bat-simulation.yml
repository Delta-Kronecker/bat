name: Run Bat Population Simulation

on:
  # Ø§Ø¬Ø±Ø§ Ø¨Ø§ Ù‡Ø± push Ø¨Ù‡ Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ
  push:
    branches: [ main, master ]

  # Ø§Ø¬Ø±Ø§ Ø¯Ø³ØªÛŒ Ø§Ø² Ø·Ø±ÛŒÙ‚ GitHub UI
  workflow_dispatch:

  # Ø§Ø¬Ø±Ø§ Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ Ø´Ø¯Ù‡ (Ù‡Ø± Ù‡ÙØªÙ‡ ÛŒÚ©Ø´Ù†Ø¨Ù‡ Ø³Ø§Ø¹Øª 00:00 UTC)
  schedule:
    - cron: '0 0 * * 0'

jobs:
  run-simulation:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install tqdm

    - name: Run bat population simulation
      run: |
        cd kkkkkkkkkk
        python bat.py

    - name: Upload simulation results
      uses: actions/upload-artifact@v4
      with:
        name: simulation-results
        path: kkkkkkkkkk/bat_population_summary.csv
        retention-days: 90

    - name: Display summary
      run: |
        echo "âœ… Simulation completed successfully!"
        if [ -f kkkkkkkkkk/bat_population_summary.csv ]; then
          echo "ğŸ“Š Result file size:"
          ls -lh kkkkkkkkkk/bat_population_summary.csv
          echo ""
          echo "ğŸ“ˆ First 10 lines of results:"
          head -n 10 kkkkkkkkkk/bat_population_summary.csv
        fi
